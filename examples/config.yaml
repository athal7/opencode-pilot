# Example config.yaml for opencode-pilot
# Copy to ~/.config/opencode-pilot/config.yaml

# Preferred OpenCode server port for attaching sessions
# When multiple OpenCode instances are running, pilot will attach new sessions
# to this port. If not set, pilot discovers servers automatically.
# server_port: 4096

# Startup delay in milliseconds before first poll (default: 10000)
# Allows OpenCode server time to fully initialize after restart.
# Set to 0 for immediate polling.
# startup_delay: 10000

# Directory containing your git repos - enables auto-discovery
# Pilot scans for repos by checking git remotes (origin and upstream)
# This means PRs from upstream forks will match your local clones
repos_dir: ~/code

defaults:
  agent: plan
  prompt: default

sources:
  # Presets - common patterns with sensible defaults
  - preset: github/my-issues
    prompt: worktree

  - preset: github/review-requests
    prompt: review

  - preset: github/my-prs-feedback
    prompt: review-feedback
    repos:
      - myorg/backend
      - myorg/frontend

  # Linear (requires teamId and assigneeId)
  - preset: linear/my-issues
    args:
      teamId: "your-team-uuid"
      assigneeId: "your-user-uuid"
      status: "In Progress"
    working_dir: ~/code/myproject
    prompt: worktree

  # Example with worktree support - run each issue in a fresh git worktree
  # - preset: github/my-issues
  #   worktree: "new"                    # Create a new worktree per session
  #   worktree_name: "issue-{number}"    # Name template for new worktrees
  #   prompt: worktree
  
  # Use an existing worktree by name
  # - preset: github/review-requests
  #   worktree: "review-worktree"        # Must exist in project sandboxes

  # GitHub shorthand syntax
  # - name: urgent-issues
  #   github: "is:issue assignee:@me label:urgent state:open"

  # Full syntax for custom MCP sources (e.g., Apple Reminders)
  # - name: agent-tasks
  #   tool:
  #     mcp: apple-reminders
  #     name: list_reminders
  #   args:
  #     list_name: "Agent Tasks"
  #     completed: false
  #   item:
  #     id: "reminder:{id}"
  #   session:
  #     name: "{title}"  # Optional: custom session name (presets have semantic defaults)

# Tool config for custom MCP servers (GitHub/Linear have built-in config)
# tools:
#   apple-reminders:
#     response_key: reminders
#     mappings:
#       title: name
#       body: notes

# Explicit repo mappings (overrides repos_dir auto-discovery)
# Only needed if a repo isn't in repos_dir or needs custom settings
# repos:
#   myorg/backend:
#     path: ~/code/backend

# Cleanup config (optional, sensible defaults)
# cleanup:
#   ttl_days: 30

# Available presets: github/my-issues, github/review-requests,
# github/my-prs-feedback, linear/my-issues
