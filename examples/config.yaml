# Example config.yaml for opencode-pilot
#
# Copy to ~/.config/opencode-pilot/config.yaml and customize
# Also create templates/ directory with prompt template files

# =============================================================================
# SERVICE - Daemon configuration
# =============================================================================
# port: 4097                        # HTTP port for health checks (default: 4097)

# =============================================================================
# TOOLS - Field mappings for MCP servers (normalize different APIs)
# =============================================================================
tools:
  github:
    mappings: {}                    # GitHub already uses standard field names

  linear:
    mappings:
      body: title                         # Use title as body
      number: "url:/([A-Z0-9]+-[0-9]+)/"  # Extract PROJ-123 from URL

# =============================================================================
# SOURCES - What to poll (generic MCP tool references)
# =============================================================================
sources:
  # GitHub issues assigned to me
  - name: my-issues
    tool:
      mcp: github
      name: search_issues
    args:
      q: "is:issue assignee:@me state:open"
    item:
      id: "{html_url}"
    prompt: worktree
    agent: plan

  # GitHub PRs needing review
  - name: review-requests
    tool:
      mcp: github
      name: search_issues
    args:
      q: "is:pr review-requested:@me state:open"
    item:
      id: "{html_url}"
    prompt: review
    agent: plan

  # Linear issues
  # NOTE: Replace teamId and assigneeId with your actual Linear UUIDs
  # Find these via: linear_list_teams and check user IDs in team members
  - name: linear-work
    tool:
      mcp: linear
      name: list_issues
    args:
      teamId: "your-team-uuid"      # Replace with actual team UUID
      assigneeId: "your-user-uuid"  # Replace with actual user UUID
      status: "Todo"
    item:
      id: "linear:{id}"
    working_dir: ~/code/myproject
    prompt: worktree
    agent: plan
