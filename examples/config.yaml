# Example config.yaml for opencode-pilot
#
# Copy to ~/.config/opencode-pilot/config.yaml and customize
# Also create templates/ directory with prompt template files

# =============================================================================
# DEFAULTS - Applied to all sources (source values override these)
# =============================================================================
defaults:
  agent: plan                        # Default agent for all sources
  prompt: default                    # Default prompt template

# =============================================================================
# TOOLS - Field mappings for MCP servers (normalize different APIs)
#
# Each tool provider can specify:
#   response_key: Key to extract array from response (e.g., "reminders", "nodes")
#   mappings: Field name translations (e.g., { body: "description" })
# =============================================================================
tools:
  github:
    response_key: items             # GitHub search returns { items: [...] }
    mappings: {}                    # GitHub already uses standard field names

  linear:
    response_key: nodes             # Linear returns { nodes: [...] }
    mappings:
      body: title                         # Use title as body
      number: "url:/([A-Z0-9]+-[0-9]+)/"  # Extract PROJ-123 from URL

  apple-reminders:
    response_key: reminders         # Apple Reminders returns { reminders: [...] }
    mappings:
      title: name                   # Reminders uses 'name' not 'title'
      body: notes                   # Reminders uses 'notes' for details

# =============================================================================
# SOURCES - What to poll
#
# Three syntax options:
#   1. Presets: Use built-in presets for common patterns
#   2. Shorthand: Use `github: "query"` for GitHub sources
#   3. Full: Specify tool, args, item for custom sources
# =============================================================================
sources:
  # ----- PRESET SYNTAX (recommended for common patterns) -----
  
  # GitHub issues assigned to me
  - preset: github/my-issues
    prompt: worktree

  # GitHub PRs needing my review
  - preset: github/review-requests
    prompt: review

  # My PRs that have change requests
  - preset: github/my-prs-feedback
    prompt: review-feedback

  # Linear issues (requires teamId and assigneeId)
  # Find IDs via: opencode-pilot discover linear
  - preset: linear/my-issues
    args:
      teamId: "your-team-uuid"      # Replace with actual team UUID
      assigneeId: "your-user-uuid"  # Replace with actual user UUID
      status: "In Progress"
    working_dir: ~/code/myproject
    prompt: worktree

  # ----- SHORTHAND SYNTAX (for custom GitHub queries) -----
  
  # Custom GitHub query with shorthand
  # - name: urgent-issues
  #   github: "is:issue assignee:@me label:urgent state:open"
  #   prompt: worktree

  # ----- FULL SYNTAX (for non-GitHub sources or full control) -----
  
  # Apple Reminders example
  # - name: agent-tasks
  #   tool:
  #     mcp: apple-reminders
  #     name: list_reminders
  #   args:
  #     list_name: "Agent Tasks"
  #     completed: false
  #   item:
  #     id: "reminder:{id}"
  #   prompt: agent-planning
  #   working_dir: ~

# =============================================================================
# Available presets:
#   github/my-issues        - Issues assigned to me
#   github/review-requests  - PRs needing my review  
#   github/my-prs-feedback  - My PRs with change requests
#   linear/my-issues        - Linear tickets (requires teamId, assigneeId)
# =============================================================================
